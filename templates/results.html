<!-- templates/results.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Automation Results</h1>
        
        <div class="card">
            <h2>Prompt</h2>
            <div class="prompt-box">
                {{ prompt }}
            </div>
            
            <h2>Results</h2>
            <div class="results-section">
                <div class="result-status {% if result.success %}success{% else %}error{% endif %}">
                    Status: {% if result.success %}Success{% else %}Failed{% endif %}
                </div>
                
                <h3>Summary</h3>
                <div class="result-summary">
                    {{ result.final_result }}
                </div>
                
                {% if result.errors and result.errors|length > 0 %}
                <h3>Errors</h3>
                <div class="error-list">
                    <ul>
                        {% for error in result.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                {% if result.visited_urls and result.visited_urls|length > 0 %}
                <h3>Pages Visited</h3>
                <div class="url-list">
                    <ul>
                        {% for url in result.visited_urls %}
                        <li>{{ url }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                {% if result.action_names and result.action_names|length > 0 %}
                <h3>Actions Performed</h3>
                <div class="action-list">
                    <ol>
                        {% for action in result.action_names %}
                        <li>{{ action }}</li>
                        {% endfor %}
                    </ol>
                </div>
                {% endif %}
            </div>
            
            {% if screenshots and screenshots|length > 0 %}
            <h2>Screenshots</h2>
            <div class="screenshots">
                {% for screenshot in screenshots %}
                <div class="screenshot-container">
                    <h4>Step {{ loop.index }}</h4>
                    <img src="{{ url_for('static', filename='screenshots/' + screenshot) }}" alt="Screenshot {{ loop.index }}">
                </div>
                {% endfor %}
            </div>
            {% endif %}
            
            <div class="action-buttons">
                <a href="{{ url_for('index') }}" class="btn btn-secondary">Run Another Automation</a>
            </div>
        </div>
    </div>
</body>
</html>